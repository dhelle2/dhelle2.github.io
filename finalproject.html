<html>

   <head>

      <script src="js/p5.min.js"> </script>
      <script src="js/p5.dom.min.js"> </script>

      <script> 
         
         var feet;
         var playing;
         var moving;
         
         //http://nicbell.net/blog/playing-html5-video-backwards/
         HTMLVideoElement.prototype.playBackwards = function() {
    this.pause();

    var video = this;

    var fps = 25;
    var intervalRewind = setInterval(function() {
        if(video.currentTime == 0){
           clearInterval(intervalRewind);
           video.pause();
        }
        else {
            video.currentTime += -(1/fps);
        }
    }, 1000 / fps);
};

         function setup() {
            //createCanvas(500,500);
            //feet = createVideo("videos/IMG_7900.MOV");
            feet = createVideo("videos/M.ogv");
            feet.size(300,300);
            //feet = createVideo("videos/M.mkv");
            playing = false;
            //document.getElementsByTagName("video")[0].playBackwards();//.currentTime = document.getElementsByTagName("video")[0].duration// feet.duration;//1.5;
         }

         function draw() {
            if(mouseIsPressed) {
               //feet.speed(-feet.speed);
               //feet.speed(-1);
               //feet.playbackRate = -1.0;
               //feet.stop(); 
               //feet.loop();
               //document.getElementsByTagName("video")[0].playbackRate = -1.0;
               //feet.loop();
               //document.getElementsByTagName("video")[0].playbackRate = .25;//= 2.0;
               //document.getElementsByTagName("video")[0].currentTime -= .01//= 2.0;
               moving = !moving;
               
               // https://codepen.io/blackgghost/pen/XBxXJN?editors=0010
               /*intervalRewind = setInterval(function(){
       //video.playbackRate = 1.0;
       if(feet.currentTime == 0){
           clearInterval(intervalRewind);
           //feet.pause();
       }*/
               
               document.getElementsByTagName("video")[0].playBackwards();
       /*else{
           feet.currentTime += -.1;
       }
                },30);
            }*/
            
            //
            
            if(moving) {
               //document.getElementsByTagName("video")[0].currentTime -= .1//= 2.0;
            }
            //background(100);
            //text("test",150,150);
            //if(moving) feet.position(mouseX,mouseY);
            if(!playing) {
               //feet.loop();
               playing = true;
               //playing = true;
            }
         }  
         
         function mousePressed() {
            moving = !moving;
            playing = !playing;
            feet.speed = -1;
            feet.stop();
            //feet.loop();
         }

      </script>

   </head>
 
   <body>
      
   </body>

</html>
